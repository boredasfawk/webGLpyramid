{"code":"!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,\"a\",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p=\"\",n(n.s=0)}([function(e,t){Detector.webgl||Detector.addGetWebGLMessage();new Info(\"Sound Pyramid\",['Created by <a href=\"http://www.olonnye.com\">Olonnye Taylor</a>',\"Concept by Melody Neumann\",'Sand from <a href=\"http://www.textures.com/\" target=\"_blank\">textures.com</a>',\"Left mouse orbit, middle mouse zoom\",\"Q,A,W,S keys to play notes\"].join(\"<br>\"));var n,o,a,r,i,s,d,u,c,l,p,E=[],w=new THREE.Vector2,m=new THREE.Raycaster,g=-100,h=function(e){this.audio=document.createElement(\"audio\");for(var t=0;t<e.length;t++)this.source=document.createElement(\"source\"),this.source.src=e[t],this.audio.appendChild(this.source)};function y(){o.aspect=window.innerWidth/window.innerHeight,o.updateProjectionMatrix(),i.setSize(window.innerWidth,window.innerHeight)}function T(e){e.preventDefault(),w.x=e.clientX/window.innerWidth*2-1,w.y=-e.clientY/window.innerHeight*2+1,function(){m.setFromCamera(w,o);var e=m.intersectObjects(s.children);e.length>0?l!=e[0].object&&(l&&(l.material.emissive.setHex(l.currentHex),n.style.cursor=\"auto\"),\"speakers\"==(l=e[0].object).group&&(l.currentHex=l.material.emissive.getHex(),l.material.emissive.setHex(20287),n.style.cursor=\"pointer\")):(l&&(l.material.emissive.setHex(l.currentHex),n.style.cursor=\"auto\"),l=null)}()}function f(e){e.userData.sound.play();var t=new TWEEN.Tween(e.position).to(e.userData.target1.position,60).easing(TWEEN.Easing.Cubic.Out),n=new TWEEN.Tween(e.position).to(e.userData.target2.position,60).delay(60).easing(TWEEN.Easing.Cubic.In),o=new TWEEN.Tween(e.position).to(e.userData.origin.position,60).delay(60).easing(TWEEN.Easing.Cubic.Out);t.chain(n),n.chain(o),t.start()}function H(e){e.preventDefault();var t=m.intersectObjects(s.children);t.length>0&&(a.enabled=!1,\"speakers\"==(p=t[0].object).group&&f(p))}function b(e){e.preventDefault(),a.enabled=!0,l&&(p=null)}function v(){requestAnimationFrame(v),u.rotation.y+=.005,TWEEN.update(),a.update(),i.render(r,o)}h.prototype.play=function(){this.audio.load(),this.audio.play()},function(){n=document.getElementById(\"container\"),(r=new THREE.Scene).fog=new THREE.Fog(14928563,500,1e3),(i=new THREE.WebGLRenderer({antialias:!0})).setClearColor(14928563,1),i.setPixelRatio(window.devicePixelRatio),i.setSize(window.innerWidth,window.innerHeight),(o=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,1,1e5)).position.set(90,150,400),(a=new THREE.OrbitControls(o,i.domElement)).minPolarAngle=Math.PI/8,a.maxPolarAngle=Math.PI/2,a.enablePan=!1,a.minDistance=200,a.maxDistance=700,THREE.DefaultLoadingManager.onLoad=function(){document.querySelector(\"#loading\")&&document.body.removeChild(document.querySelector(\"#loading\")),n.appendChild(i.domElement),v()};var e=new THREE.TextureLoader,t=new THREE.JSONLoader,l=new THREE.AmbientLight(4210752);r.add(l);var p=new THREE.DirectionalLight(16777215,.3);p.position.set(1,1,1).multiplyScalar(100),r.add(p);var w=new THREE.DirectionalLight(16777215,.3);w.position.set(-1,0,-1).multiplyScalar(100),r.add(w);var m=new THREE.MeshBasicMaterial({color:5918014,wireframe:!0,transparent:!0,opacity:.6}),f=new THREE.SphereGeometry(600,20,10),R=new THREE.IcosahedronGeometry(700,2),x=new THREE.Mesh(f,m),M=new THREE.Mesh(R,m);r.add(x),r.add(M);for(var S=new THREE.Geometry,j=new THREE.PointsMaterial({color:8019267,size:2}),O=0;O<400;O++){var P=new THREE.Vector3(THREE.Math.randFloatSpread(500),THREE.Math.randFloat(0,300+g),THREE.Math.randFloatSpread(500));S.vertices.push(P)}(u=new THREE.Points(S,j)).sortParticles=!0,r.add(u);var k=e.load(\"textures/hieroglyphs.png\"),N=new THREE.SpriteMaterial({map:k,color:16777215,fog:!0,transparent:!0,opacity:.5});(c=new THREE.Sprite(N)).scale.setScalar(80),c.position.set(50,80,50),r.add(c);var D=e.load(\"textures/sand-color.jpg\");D.wrapS=D.wrapT=THREE.RepeatWrapping,D.repeat.set(8,8);var W=new THREE.MeshLambertMaterial({color:13613978,map:D}),C=new THREE.PlaneBufferGeometry(4096,4096,1,1),L=new THREE.Mesh(C,W);r.add(L),L.rotation.x=-Math.PI/2,L.position.y=g,s=new THREE.Group,r.add(s);var B=new THREE.PointLight(65484,.6,500);B.position.set(0,130,0),s.add(B);var G=e.load(\"textures/pyramid-color.jpg\"),I=e.load(\"textures/pyramid-normal.jpg\"),A=e.load(\"textures/pyramid-spec.jpg\"),z=new THREE.MeshPhongMaterial({specular:16777215,shininess:7,side:THREE.DoubleSide,map:G,normalMap:I,specularMap:A}),_=new THREE.MeshPhongMaterial({color:16766880,specular:16777215,shininess:10,side:THREE.DoubleSide}),F=new THREE.MeshPhongMaterial({color:11440230,specular:16777215,shininess:7}),J=new THREE.SubdivisionModifier(1);t.load(\"JSON/pyramidBase.json\",(function(e){var t=new THREE.Mesh(e,z);t.position.set(0,g,0),t.scale.set(2,2,2),s.add(t),t.group=\"base\"})),t.load(\"JSON/speakerBorders.json\",(function(e){J.modify(e);var t=new THREE.Mesh(e,_);t.position.set(0,g,0),t.scale.set(2,2,2),s.add(t),t.group=\"borders\"})),t.load(\"JSON/pyramidTop.json\",(function(e){(d=new THREE.Mesh(e,z)).position.set(0,g,0),d.scale.set(2,2,2),s.add(d),d.group=\"top\";var t=new THREE.PointLight(65484,.6,500);t.position.set(0,54,0),d.add(t),d.position.y=g+5;var n=new TWEEN.Tween(d.position).to({y:g+30},1500).easing(TWEEN.Easing.Cubic.InOut),o=new TWEEN.Tween(d.position).to({y:g+5},1500).easing(TWEEN.Easing.Cubic.InOut);n.chain(o),o.chain(n),n.start()}));for(var q=1;q<=8;q++)t.load(\"JSON/speaker\"+q+\".json\",function(e){return function(t,n){J.modify(t);var o,a=new THREE.Mesh(t,F.clone());switch(a.position.set(0,g,0),a.scale.set(2,2,2),s.add(a),a.name=\"speaker\"+e,a.group=\"speakers\",parseInt(a.name.replace(\"speaker\",\"\"))){case 1:case 5:o=E[0];break;case 2:case 6:o=E[1];break;case 3:case 7:o=E[2];break;case 4:case 8:o=E[3];break;default:o=E[0]}a.userData.sound=o;var r=new THREE.Vector3(.6457077325259278,.40832318480986296,.6452392586498092);a.geometry.computeBoundingBox();var i=a.geometry.boundingBox,d=.5*(i.max.x+i.min.x),u=.5*(i.max.z+i.min.z);r.x*=d>0?1:-1,r.z*=u>0?1:-1,(a.userData.origin=new THREE.Group).position.copy(a.position);var c=a.userData.target1=new THREE.Group;c.position.copy(a.position),c.translateOnAxis(r,8);var l=a.userData.target2=new THREE.Group;l.position.copy(a.position),l.translateOnAxis(r,-4)}}(q));var V=[\"Ab\",\"Eb\",\"A\",\"E\"];for(q=0;q<V.length;q++){var Q=new h([\"sounds\"+V[q]+\".mp3\"]);E.push(Q)}document.addEventListener(\"mousemove\",T,!1),document.addEventListener(\"mousedown\",H,!1),document.addEventListener(\"mouseup\",b,!1),window.addEventListener(\"resize\",y,!1)}(),window.addEventListener(\"keydown\",(function(e){83==e.keyCode&&f(r.getObjectByName(\"speaker4\")),81==e.keyCode&&f(r.getObjectByName(\"speaker1\")),65==e.keyCode&&f(r.getObjectByName(\"speaker2\")),87==e.keyCode&&f(r.getObjectByName(\"speaker3\"))}))}]);","extractedComments":[]}